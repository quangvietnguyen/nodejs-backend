(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[7],{101:function(e,a,t){"use strict";t.r(a);var n=t(56),r=t(42),i=t.n(r),l=t(43),s=t(6),c=t(0),u=t.n(c),o=t(54),p=t(57),m=t(55),d=t(41),v=(t(98),t(44)),f=t(9),b=t(45),O=t(13),g=t(46),E=t(58);a.default=function(){var e=Object(c.useContext)(f.a),a=Object(c.useState)(!0),t=Object(s.a)(a,2),r=t[0],j=t[1],w=Object(g.a)(),h=w.isLoading,y=w.error,k=w.sendRequest,x=w.clearError,I=Object(p.a)({email:{value:"",isValid:!1},password:{value:"",isValid:!1}},!1),N=Object(s.a)(I,3),P=N[0],S=N[1],T=N[2],V=function(){var a=Object(l.a)(i.a.mark((function a(t){var n,l,s;return i.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(t.preventDefault(),console.log(P.inputs),!r){a.next=14;break}return a.prev=3,a.next=6,k("https://travel-diary-mern.herokuapp.com/api/users/login","POST",JSON.stringify({email:P.inputs.email.value,password:P.inputs.password.value}),{"Content-Type":"application/json"});case 6:n=a.sent,e.login(n.userId,n.token),a.next=12;break;case 10:a.prev=10,a.t0=a.catch(3);case 12:a.next=28;break;case 14:return a.prev=14,(l=new FormData).append("email",P.inputs.email.value),l.append("name",P.inputs.name.value),l.append("password",P.inputs.password.value),l.append("image",P.inputs.image.value),a.next=22,k("https://travel-diary-mern.herokuapp.com/api/users/signup","POST",l);case 22:s=a.sent,e.login(s.userId,s.token),a.next=28;break;case 26:a.prev=26,a.t1=a.catch(14);case 28:case"end":return a.stop()}}),a,null,[[3,10],[14,26]])})));return function(e){return a.apply(this,arguments)}}();return u.a.createElement(u.a.Fragment,null,u.a.createElement(b.a,{error:y,onClear:x}),u.a.createElement(v.a,{className:"authentication"},h&&u.a.createElement(O.a,{asOverlay:!0}),u.a.createElement("h2",null,"Login Required"),u.a.createElement("hr",null),u.a.createElement("form",{onSubmit:V},!r&&u.a.createElement(m.a,{element:"input",id:"name",type:"text",label:"Your Name",validators:[Object(o.c)()],errorText:"Please enter a name.",onInput:S}),!r&&u.a.createElement(E.a,{center:!0,id:"image",onInput:S,errorText:"Please provide an image"}),u.a.createElement(m.a,{id:"email",type:"Email",label:"E-mail",element:"input",validators:[Object(o.a)()],errorText:"Please enter a valid email address.",onInput:S,value:P.inputs.email.value,valid:P.inputs.email.isValid}),u.a.createElement(m.a,{id:"password",type:"Password",label:"Password",element:"input",validators:[Object(o.b)(6)],errorText:"Please enter a valid password (min 6 characters).",onInput:S,value:P.inputs.password.value,valid:P.inputs.password.isValid}),u.a.createElement(d.a,{type:"submit",disabled:!P.isValid},r?"LOGIN":"SIGNUP")),u.a.createElement(d.a,{inverse:!0,onClick:function(){r?T(Object(n.a)(Object(n.a)({},P.inputs),{},{name:{value:"",isValid:!1},image:{value:null,isValid:!1}}),!1):T(Object(n.a)(Object(n.a)({},P.inputs),{},{name:void 0,image:void 0}),P.inputs.email.isValid&&P.inputs.password.isValid),j((function(e){return!e}))}},"SWITCH TO ",r?"SIGNUP":"LOGIN")))}},44:function(e,a,t){"use strict";var n=t(0),r=t.n(n);t(47);a.a=function(e){return r.a.createElement("div",{className:"card ".concat(e.className),style:e.style},e.children)}},47:function(e,a,t){},58:function(e,a,t){"use strict";var n=t(6),r=(t(59),t(0)),i=t.n(r),l=t(41);a.a=function(e){var a=Object(r.useState)(),t=Object(n.a)(a,2),s=t[0],c=t[1],u=Object(r.useState)(),o=Object(n.a)(u,2),p=o[0],m=o[1],d=Object(r.useState)(!1),v=Object(n.a)(d,2),f=v[0],b=v[1],O=Object(r.useRef)();Object(r.useEffect)((function(){if(s){var e=new FileReader;e.onload=function(){m(e.result)},e.readAsDataURL(s)}}),[s]);return i.a.createElement("div",{className:"form-control"},i.a.createElement("input",{id:e.id,style:{display:"none"},type:"file",accept:".jpg,.png,.jpeg",ref:O,onChange:function(a){var t,n=f;a.target.files||1===a.target.files.length?(t=a.target.files[0],c(t),b(!0),n=!0):(b(!1),n=!1),e.onInput(e.id,t,n)}}),i.a.createElement("div",{className:"image-upload ".concat(e.center&&"center")},i.a.createElement("div",{className:"image-upload__preview"},p?i.a.createElement("img",{src:p,alt:"preview"}):i.a.createElement("p",null,"Please pick an image")),i.a.createElement(l.a,{type:"button",onClick:function(){O.current.click()}},"UPLOAD")),!f&&i.a.createElement("p",null,e.errorText))}},59:function(e,a,t){},98:function(e,a,t){}}]);
//# sourceMappingURL=7.d8427fc4.chunk.js.map